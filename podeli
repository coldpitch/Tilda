<script>

  const PodeliInjector = {
    init() {
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', () => this.inject());
      } else {
        this.inject();
      }

      this.observePopup();
    },

    inject() {
      const priceWrapper = document.querySelector('.js-store-price-wrapper');
      const prodInfo = document.querySelector('.t-store__prod-popup__info');

      if (!priceWrapper || !prodInfo) {
        return;
      }

      if (prodInfo.querySelector('#podeli-container')) {
        return;
      }

      const container = document.createElement('div');
      container.id = 'podeli-container';
      container.style.marginTop = '16px';

      priceWrapper.parentNode.insertBefore(container, priceWrapper.nextSibling);
    },

    observePopup() {
      const observer = new MutationObserver((mutations) => {
        mutations.forEach((mutation) => {
          if (mutation.addedNodes.length) {
            setTimeout(() => this.inject(), 100);
          }
        });
      });

      observer.observe(document.body, {
        childList: true,
        subtree: true
      });
    }
  };

  PodeliInjector.init();

</script>

<style>
  .podeli-button {
    display: inline-flex !important;
    align-items: center !important;
    gap: 10px !important;
    padding: 12px !important;
    background: #f5f5f5 !important;
    border: none !important;
    border-radius: 4px !important;
    cursor: pointer !important;
    font-family: Avenir, Helvetica, Arial, sans-serif !important;
    font-size: 13px !important;
    line-height: normal !important;
    font-weight: normal !important;
    text-transform: none !important;
    transition: background 0.2s !important;
  }

  .podeli-button:hover {
    background: #ebebeb !important;
  }

  .podeli-button-label {
    width: 52px !important;
    height: 16px !important;
    background: black !important;
    border-radius: 2px !important;
    flex-shrink: 0 !important;
  }

  .podeli-button-text {
    flex-grow: 1 !important;
    color: #252626; 
  }

  .podeli-modal-bg {
    display: none !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    height: 100% !important;
    background: rgba(0, 0, 0, 0.75) !important;
    z-index: 999999 !important;
  }

  .podeli-modal-bg.active {
    display: block !important;
  }

  .podeli-modal {
    position: fixed !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    background: white !important;
    border-radius: 24px !important;
    padding: 24px !important;
    max-width: 600px !important;
    width: 90% !important;
    max-height: 85vh !important;
    overflow-y: auto !important;
    box-shadow: 0 18px 30px rgba(51, 51, 51, 0.64) !important;
    z-index: 9999999 !important;
    display: none !important;
    font-family: Avenir, Helvetica, Arial, sans-serif !important;
  }

  .podeli-modal * {
    font-family: Avenir, Helvetica, Arial, sans-serif !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  .podeli-modal.active {
    display: block !important;
  }

  .podeli-modal-close {
    position: absolute !important;
    top: 12px !important;
    right: 12px !important;
    background: none !important;
    border: none !important;
    cursor: pointer !important;
    width: 32px !important;
    height: 32px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    padding: 0 !important;
  }

  .podeli-modal-header {
    font-size: 24px !important;
    font-weight: 700 !important;
    margin-bottom: 10px !important;
    text-align: left !important;
    line-height: 1.2 !important;
    color: #000 !important;
  }

  .podeli-modal-header svg {
    display: block !important;
    margin-bottom: 10px !important;
  }

  .podeli-modal-header-text {
    text-align: left !important;
    padding-top: 10px !important;
  }

  .podeli-modal-description {
    font-size: 14px !important;
    color: rgba(0, 0, 0, 0.6) !important;
    margin-bottom: 20px !important;
    line-height: 1.4 !important;
  }

  .podeli-features {
    display: flex !important;
    gap: 20px !important;
    margin: 20px 0 !important;
    flex-wrap: wrap !important;
  }

  .podeli-feature {
    display: flex !important;
    align-items: center !important;
    gap: 10px !important;
    font-size: 14px !important;
    color: #000 !important;
    line-height: 1.4 !important;
  }

  .podeli-feature svg {
    flex-shrink: 0 !important;
    min-width: 32px !important;
    min-height: 32px !important;
  }

  .podeli-payments {
    display: flex !important;
    justify-content: space-between !important;
    background: #f6f7f8 !important;
    border-radius: 12px !important;
    padding: 16px !important;
    margin: 20px 0 !important;
    gap: 10px !important;
  }

  .podeli-payment-item {
    flex: 1 !important;
    color: #000 !important;
  }

  .podeli-payment-date {
    font-size: 12px !important;
    color: rgba(0, 0, 0, 0.6) !important;
    margin-bottom: 8px !important;
    line-height: 1.3 !important;
  }

  .podeli-payment-amount {
    font-size: 14px !important;
    font-weight: 700 !important;
    color: #000 !important;
    line-height: 1.2 !important;
  }

  .podeli-payment-item:first-child .podeli-payment-date {
    color: #000 !important;
    font-weight: 600 !important;
  }

  .podeli-payment-item:not(:first-child) {
    color: rgba(0, 0, 0, 0.4) !important;
  }

  .podeli-payment-item:not(:first-child) .podeli-payment-amount,
  .podeli-payment-item:not(:first-child) .podeli-payment-date {
    color: rgba(0, 0, 0, 0.4) !important;
  }

  .podeli-payment-line {
    height: 5px !important;
    background: #FF0001 !important;
    border-radius: 3px !important;
    margin: 8px auto 0 !important;
  }

  .podeli-payment-item:not(:first-child) .podeli-payment-line {
    background: rgba(0, 0, 0, 0.06) !important;
  }

  .podeli-modal-footer {
    font-size: 12px !important;
    text-align: center !important;
    color: rgba(0, 0, 0, 0.4) !important;
    line-height: 1.4 !important;
  }

  .podeli-modal-footer a {
    color: #1771e6 !important;
    text-decoration: none !important;
  }

  .podeli-modal-footer a:hover {
    text-decoration: underline !important;
  }

  @media (max-width: 640px) {
    .podeli-modal {
      position: fixed !important;
      bottom: 0 !important;
      top: auto !important;
      left: 0 !important;
      right: 0 !important;
      transform: none !important;
      border-radius: 24px 24px 0 0 !important;
      width: 100% !important;
      max-width: none !important;
      padding: 16px !important;
      max-height: 80vh !important;
      overflow-y: auto !important;
      box-sizing: border-box !important;
    }

    .podeli-payments {
      flex-wrap: wrap !important;
    }

    .podeli-payment-item {
      flex: 1 1 45% !important;
    }

    .podeli-features {
      flex-direction: column !important;
      gap: 12px !important;
    }

    .podeli-feature svg {
      min-width: 32px !important;
      min-height: 32px !important;
    }
  }
</style>

<script>
  const PodeliWidget = {
    modal: null,
    bg: null,
    totalAmount: 0,

    // Функция для форматирования даты
    formatDate(date) {
      const months = ['янв', 'фев', 'мар', 'апр', 'май', 'июн', 'июл', 'авг', 'сен', 'окт', 'ноя', 'дек'];
      return `${date.getDate()} ${months[date.getMonth()]}`;
    },

    // Получает цену из DOM
    getPriceFromDOM() {
      const priceElement = document.querySelector('[data-product-price-def]');
      if (priceElement) {
        const price = parseInt(priceElement.getAttribute('data-product-price-def'));
        return isNaN(price) ? 0 : price;
      }
      return 0;
    },

    // Вычисляет платежи
    calculatePayments() {
      const total = this.totalAmount;
      const baseAmount = Math.floor(total / 4);
      const remainder = total % 4;

      // Первый платеж может быть больше на остаток
      const payments = [
        { amount: baseAmount + remainder, days: 0 }
      ];

      // Остальные 3 платежа через 2 недели
      for (let i = 1; i < 4; i++) {
        payments.push({ amount: baseAmount, days: i * 14 });
      }

      // Конвертируем дни в даты
      return payments.map(p => {
        const date = new Date();
        date.setDate(date.getDate() + p.days);
        return {
          date: this.formatDate(date),
          amount: p.amount
        };
      });
    },

    init(selector, config = {}) {
      // Получаем цену из DOM
      this.totalAmount = this.getPriceFromDOM();

      // Если передана сумма в config, используем её
      if (config.amount && config.amount > 0) {
        this.totalAmount = config.amount;
      }

      // Если цена не получилась - не инициализируем
      if (this.totalAmount <= 0) {
        return;
      }

      this.config = {
        payments: this.calculatePayments(),
        ...config
      };

      this.selector = selector;
      this.renderButton(selector);
      this.setupModal();
      this.observePriceChanges();
    },

    // Обновляет цену в кнопке и модалке
    updatePrice() {
      const newPrice = this.getPriceFromDOM();
      if (newPrice <= 0 || newPrice === this.totalAmount) return;

      this.totalAmount = newPrice;
      this.config.payments = this.calculatePayments();

      // Обновляем текст кнопки
      const buttonText = document.querySelector('.podeli-button-text');
      if (buttonText) {
        buttonText.textContent = `4 платежа по ${this.config.payments[0].amount} ₽`;
      }

      // Обновляем платежи в модалке
      const paymentsContainer = this.modal.querySelector('.podeli-payments');
      if (paymentsContainer) {
        paymentsContainer.innerHTML = this.config.payments.map((p, i) => `
          <div class="podeli-payment-item">
            <div class="podeli-payment-date">${i === 0 ? 'Сегодня' : p.date}</div>
            <div class="podeli-payment-amount">${p.amount} <span>₽</span></div>
            <div class="podeli-payment-line"></div>
          </div>
        `).join('');
      }
    },

    // Наблюдает за изменением цены при смене размера/цвета
    observePriceChanges() {
      // 1. MutationObserver на атрибут data-product-price-def
      const priceElement = document.querySelector('[data-product-price-def]');
      if (priceElement) {
        const priceObserver = new MutationObserver(() => {
          this.updatePrice();
        });
        priceObserver.observe(priceElement, {
          attributes: true,
          attributeFilter: ['data-product-price-def']
        });
      }

      // 2. Слушаем change на селектах и радио-кнопках опций товара
      const controls = document.querySelector('.js-product-controls-wrapper');
      if (controls) {
        controls.addEventListener('change', () => {
          setTimeout(() => this.updatePrice(), 300);
        });
      }
    },

    renderButton(selector) {
      const container = document.querySelector(selector);
      if (!container) return;

      const firstPayment = this.config.payments[0];
      const button = document.createElement('button');
      button.className = 'podeli-button';
      button.innerHTML = `
<svg width="64" height="20" viewBox="0 0 64 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_826_23)">
<path d="M62 0H2C0.89543 0 0 0.89543 0 2V18C0 19.1046 0.89543 20 2 20H62C63.1046 20 64 19.1046 64 18V2C64 0.89543 63.1046 0 62 0Z" fill="white"/>
<path d="M8 13.7961H9.12425V7.21851H13.2374V13.8012H14.341V6.1988H8V13.7961Z" fill="#FF0001"/>
<path d="M29.2511 6.73351C29.1799 6.57443 29.0641 6.43935 28.9179 6.34458C28.7716 6.2498 28.601 6.19937 28.4267 6.19937C28.2524 6.19937 28.0819 6.2498 27.9356 6.34458C27.7893 6.43935 27.6736 6.57443 27.6024 6.73351L24.9186 12.7661H23.9811V13.8029H32.8792V12.7661H31.9417L29.2511 6.73351ZM26.1371 12.7661L28.4302 7.50129L30.7215 12.7661H26.1371Z" fill="#FF0001"/>
<path d="M45.0574 6.1988C44.8837 6.19888 44.7139 6.25012 44.5691 6.34613C44.4243 6.44214 44.311 6.57866 44.2434 6.73865L41.2905 13.7326L41.2614 13.8029H42.4816L45.0523 7.56641L47.623 13.7721L47.635 13.8029H48.8569L45.8749 6.73865C45.8074 6.57785 45.6937 6.44071 45.5481 6.3446C45.4026 6.2485 45.2318 6.19776 45.0574 6.1988Z" fill="#FF0001"/>
<path d="M55.479 6.1988L51.0797 12.1697V6.1988H49.9726V13.8029H51.054L55.4722 7.80634V13.8029H56.5793V6.1988H55.479Z" fill="#FF0001"/>
<path d="M39.6624 6.97001C38.9355 6.34413 38.0081 5.99993 37.0488 6C36.2576 5.99992 35.484 6.23454 34.8261 6.67417C34.1682 7.11379 33.6554 7.73868 33.3527 8.46977C33.05 9.20087 32.9709 10.0053 33.1255 10.7814C33.2801 11.5574 33.6613 12.2702 34.2211 12.8295C34.6859 13.2926 35.2575 13.6342 35.8855 13.8241C36.5136 14.0141 37.1787 14.0465 37.8222 13.9187C38.4658 13.7908 39.068 13.5065 39.5757 13.0909C40.0834 12.6753 40.481 12.1412 40.7335 11.5356L40.7626 11.467H39.563L39.5476 11.491C39.2904 11.9236 38.9252 12.2819 38.4877 12.5307C38.0502 12.7795 37.5555 12.9102 37.0523 12.91C36.3535 12.9092 35.6783 12.6573 35.1498 12.2002C34.6212 11.7431 34.2746 11.1112 34.1731 10.4199H41.0283V10.3753C41.0403 10.2536 41.0471 10.1251 41.0471 10C41.0468 9.80379 41.032 9.60788 41.0026 9.41388C40.8631 8.46498 40.3875 7.59771 39.6624 6.97001ZM35.2065 7.75321C35.5912 7.43945 36.0496 7.22919 36.5384 7.14236C37.0271 7.05553 37.53 7.09503 37.9992 7.25709C38.4684 7.41916 38.8884 7.69842 39.2194 8.06839C39.5503 8.43836 39.7813 8.88675 39.8903 9.37104H34.2074C34.3492 8.73566 34.6997 8.1661 35.2031 7.75321H35.2065Z" fill="#FF0001"/>
<path d="M19.8252 6C19.0341 6 18.2607 6.2346 17.6029 6.67412C16.9451 7.11365 16.4324 7.73836 16.1297 8.46927C15.8269 9.20017 15.7477 10.0044 15.902 10.7804C16.0564 11.5563 16.4374 12.269 16.9968 12.8284C17.5562 13.3878 18.2689 13.7688 19.0448 13.9231C19.8208 14.0775 20.625 13.9983 21.3559 13.6955C22.0868 13.3928 22.7115 12.8801 23.1511 12.2223C23.5906 11.5645 23.8252 10.7911 23.8252 10C23.8238 8.93955 23.402 7.92293 22.6521 7.17308C21.9023 6.42322 20.8856 6.00136 19.8252 6ZM22.7386 10C22.7386 10.5762 22.5678 11.1395 22.2476 11.6186C21.9275 12.0977 21.4725 12.4712 20.9401 12.6917C20.4078 12.9122 19.822 12.9699 19.2568 12.8575C18.6916 12.7451 18.1725 12.4676 17.7651 12.0601C17.3576 11.6527 17.0801 11.1335 16.9677 10.5684C16.8553 10.0032 16.913 9.41743 17.1335 8.88507C17.354 8.35271 17.7274 7.89769 18.2066 7.57755C18.6857 7.25742 19.249 7.08655 19.8252 7.08655C20.5979 7.08655 21.3389 7.3935 21.8853 7.93988C22.4317 8.48626 22.7386 9.2273 22.7386 10Z" fill="#FF0001"/>
<path d="M23.7841 9.42759C23.6584 8.57286 23.2603 7.78148 22.649 7.17106C22.0377 6.56064 21.2457 6.16377 20.3907 6.03942C20.314 6.02944 20.2361 6.03606 20.1622 6.05882C20.0883 6.08159 20.0201 6.11998 19.9623 6.17138C19.8836 6.23982 19.8262 6.32933 19.7967 6.42936C19.7672 6.52939 19.767 6.63576 19.796 6.73593C19.825 6.8361 19.882 6.92588 19.9604 6.99468C20.0387 7.06349 20.1351 7.10844 20.2382 7.12425C20.8598 7.21409 21.4357 7.5024 21.8801 7.94619C22.3246 8.38998 22.6137 8.96551 22.7044 9.58698C22.7204 9.68991 22.7656 9.78612 22.8345 9.86426C22.9034 9.94239 22.9932 9.99921 23.0933 10.028C23.1935 10.0568 23.2997 10.0564 23.3996 10.0269C23.4995 9.99732 23.5889 9.93984 23.6572 9.86118C23.7086 9.80248 23.7466 9.73328 23.7685 9.65839C23.7904 9.5835 23.7957 9.50474 23.7841 9.42759Z" fill="black"/>
</g>
<defs>
<clipPath id="clip0_826_23">
<rect width="64" height="20" fill="white"/>
</clipPath>
</defs>
</svg>

      <div class="podeli-button-text">
        4 платежа по ${firstPayment.amount} ₽
      </div>
      <svg width="6" height="11" viewBox="0 0 6 11" fill="none" style="flex-shrink: 0;">
        <path d="M4.18934 5.25L0.219669 9.21967C-0.0732238 9.51256 -0.0732238 9.98744 0.219669 10.2803C0.512563 10.5732 0.987437 10.5732 1.28033 10.2803L5.78033 5.78033C6.07322 5.48744 6.07322 5.01256 5.78033 4.71967L1.28033 0.219669C0.987438 -0.0732245 0.512564 -0.0732245 0.21967 0.219669C-0.073223 0.512562 -0.073223 0.987436 0.21967 1.28033L4.18934 5.25Z" fill="#9299A2"/>
      </svg>
    `;

      button.addEventListener('click', () => this.openModal());
      container.appendChild(button);
    },

    setupModal() {
      const bg = document.createElement('div');
      bg.className = 'podeli-modal-bg';

      const modal = document.createElement('div');
      modal.className = 'podeli-modal';

      const closeBtn = document.createElement('button');
      closeBtn.className = 'podeli-modal-close';
      closeBtn.innerHTML = `
      <svg width="10" height="10" viewBox="0 0 10 10" fill="none">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M1.70711 0.292893C1.31658 -0.0976311 0.683417 -0.0976311 0.292893 0.292893C-0.0976311 0.683417 -0.0976311 1.31658 0.292893 1.70711L3.58579 5L0.292893 8.29289C-0.0976311 8.68342 -0.0976311 9.31658 0.292893 9.70711C0.683417 10.0976 1.31658 10.0976 1.70711 9.70711L5 6.41421L8.29289 9.70711C8.68342 10.0976 9.31658 10.0976 9.70711 9.70711C10.0976 9.31658 10.0976 8.68342 9.70711 8.29289L6.41421 5L9.70711 1.70711C10.0976 1.31658 10.0976 0.683417 9.70711 0.292893C9.31658 -0.0976311 8.68342 -0.0976311 8.29289 0.292893L5 3.58579L1.70711 0.292893Z" fill="#999"/>
      </svg>
    `;
      closeBtn.addEventListener('click', () => this.closeModal());

      const header = document.createElement('div');
      header.className = 'podeli-modal-header';
      header.innerHTML = `
<svg width="64" height="20" viewBox="0 0 64 20" fill="none" xmlns="http://www.w3.org/2000/svg">
<g clip-path="url(#clip0_826_23)">
<path d="M62 0H2C0.89543 0 0 0.89543 0 2V18C0 19.1046 0.89543 20 2 20H62C63.1046 20 64 19.1046 64 18V2C64 0.89543 63.1046 0 62 0Z" fill="#f5f5f5"/>
<path d="M8 13.7961H9.12425V7.21851H13.2374V13.8012H14.341V6.1988H8V13.7961Z" fill="#FF0001"/>
<path d="M29.2511 6.73351C29.1799 6.57443 29.0641 6.43935 28.9179 6.34458C28.7716 6.2498 28.601 6.19937 28.4267 6.19937C28.2524 6.19937 28.0819 6.2498 27.9356 6.34458C27.7893 6.43935 27.6736 6.57443 27.6024 6.73351L24.9186 12.7661H23.9811V13.8029H32.8792V12.7661H31.9417L29.2511 6.73351ZM26.1371 12.7661L28.4302 7.50129L30.7215 12.7661H26.1371Z" fill="#FF0001"/>
<path d="M45.0574 6.1988C44.8837 6.19888 44.7139 6.25012 44.5691 6.34613C44.4243 6.44214 44.311 6.57866 44.2434 6.73865L41.2905 13.7326L41.2614 13.8029H42.4816L45.0523 7.56641L47.623 13.7721L47.635 13.8029H48.8569L45.8749 6.73865C45.8074 6.57785 45.6937 6.44071 45.5481 6.3446C45.4026 6.2485 45.2318 6.19776 45.0574 6.1988Z" fill="#FF0001"/>
<path d="M55.479 6.1988L51.0797 12.1697V6.1988H49.9726V13.8029H51.054L55.4722 7.80634V13.8029H56.5793V6.1988H55.479Z" fill="#FF0001"/>
<path d="M39.6624 6.97001C38.9355 6.34413 38.0081 5.99993 37.0488 6C36.2576 5.99992 35.484 6.23454 34.8261 6.67417C34.1682 7.11379 33.6554 7.73868 33.3527 8.46977C33.05 9.20087 32.9709 10.0053 33.1255 10.7814C33.2801 11.5574 33.6613 12.2702 34.2211 12.8295C34.6859 13.2926 35.2575 13.6342 35.8855 13.8241C36.5136 14.0141 37.1787 14.0465 37.8222 13.9187C38.4658 13.7908 39.068 13.5065 39.5757 13.0909C40.0834 12.6753 40.481 12.1412 40.7335 11.5356L40.7626 11.467H39.563L39.5476 11.491C39.2904 11.9236 38.9252 12.2819 38.4877 12.5307C38.0502 12.7795 37.5555 12.9102 37.0523 12.91C36.3535 12.9092 35.6783 12.6573 35.1498 12.2002C34.6212 11.7431 34.2746 11.1112 34.1731 10.4199H41.0283V10.3753C41.0403 10.2536 41.0471 10.1251 41.0471 10C41.0468 9.80379 41.032 9.60788 41.0026 9.41388C40.8631 8.46498 40.3875 7.59771 39.6624 6.97001ZM35.2065 7.75321C35.5912 7.43945 36.0496 7.22919 36.5384 7.14236C37.0271 7.05553 37.53 7.09503 37.9992 7.25709C38.4684 7.41916 38.8884 7.69842 39.2194 8.06839C39.5503 8.43836 39.7813 8.88675 39.8903 9.37104H34.2074C34.3492 8.73566 34.6997 8.1661 35.2031 7.75321H35.2065Z" fill="#FF0001"/>
<path d="M19.8252 6C19.0341 6 18.2607 6.2346 17.6029 6.67412C16.9451 7.11365 16.4324 7.73836 16.1297 8.46927C15.8269 9.20017 15.7477 10.0044 15.902 10.7804C16.0564 11.5563 16.4374 12.269 16.9968 12.8284C17.5562 13.3878 18.2689 13.7688 19.0448 13.9231C19.8208 14.0775 20.625 13.9983 21.3559 13.6955C22.0868 13.3928 22.7115 12.8801 23.1511 12.2223C23.5906 11.5645 23.8252 10.7911 23.8252 10C23.8238 8.93955 23.402 7.92293 22.6521 7.17308C21.9023 6.42322 20.8856 6.00136 19.8252 6ZM22.7386 10C22.7386 10.5762 22.5678 11.1395 22.2476 11.6186C21.9275 12.0977 21.4725 12.4712 20.9401 12.6917C20.4078 12.9122 19.822 12.9699 19.2568 12.8575C18.6916 12.7451 18.1725 12.4676 17.7651 12.0601C17.3576 11.6527 17.0801 11.1335 16.9677 10.5684C16.8553 10.0032 16.913 9.41743 17.1335 8.88507C17.354 8.35271 17.7274 7.89769 18.2066 7.57755C18.6857 7.25742 19.249 7.08655 19.8252 7.08655C20.5979 7.08655 21.3389 7.3935 21.8853 7.93988C22.4317 8.48626 22.7386 9.2273 22.7386 10Z" fill="#FF0001"/>
<path d="M23.7841 9.42759C23.6584 8.57286 23.2603 7.78148 22.649 7.17106C22.0377 6.56064 21.2457 6.16377 20.3907 6.03942C20.314 6.02944 20.2361 6.03606 20.1622 6.05882C20.0883 6.08159 20.0201 6.11998 19.9623 6.17138C19.8836 6.23982 19.8262 6.32933 19.7967 6.42936C19.7672 6.52939 19.767 6.63576 19.796 6.73593C19.825 6.8361 19.882 6.92588 19.9604 6.99468C20.0387 7.06349 20.1351 7.10844 20.2382 7.12425C20.8598 7.21409 21.4357 7.5024 21.8801 7.94619C22.3246 8.38998 22.6137 8.96551 22.7044 9.58698C22.7204 9.68991 22.7656 9.78612 22.8345 9.86426C22.9034 9.94239 22.9932 9.99921 23.0933 10.028C23.1935 10.0568 23.2997 10.0564 23.3996 10.0269C23.4995 9.99732 23.5889 9.93984 23.6572 9.86118C23.7086 9.80248 23.7466 9.73328 23.7685 9.65839C23.7904 9.5835 23.7957 9.50474 23.7841 9.42759Z" fill="black"/>
</g>
<defs>
<clipPath id="clip0_826_23">
<rect width="64" height="20" fill="white"/>
</clipPath>
</defs>
</svg>

      <div class="podeli-modal-header-text">Оплатите 25% от стоимости покупки</div>
    `;

      const description = document.createElement('p');
      description.className = 'podeli-modal-description';
      description.textContent = 'Оставшиеся 3 части спишутся автоматически с шагом в две недели';

      const features = document.createElement('div');
      features.className = 'podeli-features';
      features.innerHTML = `
      <div class="podeli-feature">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
          <rect opacity="0.08" width="32" height="32" rx="4" fill="#B182BC"></rect>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M13.8666 11.4666C14.1853 11.4666 14.4736 11.6557 14.6005 11.9481L16.2503 15.7496L20.0518 17.3993C20.3441 17.5262 20.5333 17.8145 20.5333 18.1332C20.5333 18.4519 20.3441 18.7402 20.0518 18.8671L16.2503 20.5169L14.6005 24.3184C14.4736 24.6107 14.1853 24.7999 13.8666 24.7999C13.5479 24.7999 13.2596 24.6107 13.1327 24.3184L11.483 20.5169L7.68146 18.8671C7.38911 18.7402 7.19995 18.4519 7.19995 18.1332C7.19995 17.8145 7.38911 17.5262 7.68146 17.3993L11.483 15.7496L13.1327 11.9481C13.2596 11.6557 13.5479 11.4666 13.8666 11.4666ZM13.8666 14.2761L12.825 16.6762C12.7442 16.8623 12.5957 17.0108 12.4096 17.0916L10.0095 18.1332L12.4096 19.1748C12.5957 19.2556 12.7442 19.4041 12.825 19.5902L13.8666 21.9904L14.9082 19.5902C14.989 19.4041 15.1375 19.2556 15.3236 19.1748L17.7238 18.1332L15.3236 17.0916C15.1375 17.0108 14.989 16.8623 14.9082 16.6762L13.8666 14.2761Z" fill="black"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M20.5333 6.66675C20.852 6.66675 21.1403 6.85591 21.2672 7.14826L22.1906 9.2761L24.3185 10.1995C24.6108 10.3264 24.8 10.6147 24.8 10.9334C24.8 11.2521 24.6108 11.5404 24.3185 11.6673L22.1906 12.5907L21.2672 14.7186C21.1403 15.0109 20.852 15.2001 20.5333 15.2001C20.2146 15.2001 19.9263 15.0109 19.7995 14.7186L18.876 12.5907L16.7482 11.6673C16.4558 11.5404 16.2667 11.2521 16.2667 10.9334C16.2667 10.6147 16.4558 10.3264 16.7482 10.1995L18.876 9.2761L19.7995 7.14826C19.9263 6.85591 20.2146 6.66675 20.5333 6.66675ZM20.5333 9.47625L20.218 10.2027C20.1373 10.3889 19.9888 10.5374 19.8027 10.6181L19.0762 10.9334L19.8027 11.2487C19.9888 11.3295 20.1373 11.478 20.218 11.6641L20.5333 12.3906L20.8486 11.6641C20.9294 11.478 21.0779 11.3295 21.264 11.2487L21.9905 10.9334L21.264 10.6181C21.0779 10.5374 20.9294 10.3889 20.8486 10.2027L20.5333 9.47625Z" fill="#B182BC"></path>
        </svg>
        <span>Без процентов и комиссий</span>
      </div>
      <div class="podeli-feature">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
          <rect opacity="0.08" width="32" height="32" rx="4" fill="#6F99C6"></rect>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M18.4 16C18.4 15.5581 18.7581 15.2 19.2 15.2C20.5218 15.2 21.6 16.2781 21.6 17.6C21.6 18.9218 20.5218 20 19.2 20C18.7581 20 18.4 19.6418 18.4 19.2C18.4 18.7581 18.7581 18.4 19.2 18.4C19.6381 18.4 20 18.0381 20 17.6C20 17.1618 19.6381 16.8 19.2 16.8C18.7581 16.8 18.4 16.4418 18.4 16Z" fill="#6F99C6"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M23.4666 20.8001V11.2001C23.4666 10.611 22.9891 10.1334 22.4 10.1334H9.59996C9.01085 10.1334 8.53329 10.611 8.53329 11.2001V20.8001C8.53329 21.3892 9.01085 21.8668 9.59996 21.8668H22.4C22.9891 21.8668 23.4666 21.3892 23.4666 20.8001ZM9.59996 8.53345C8.1272 8.53345 6.93329 9.72735 6.93329 11.2001V20.8001C6.93329 22.2729 8.1272 23.4668 9.59996 23.4668H22.4C23.8727 23.4668 25.0666 22.2729 25.0666 20.8001V11.2001C25.0666 9.72735 23.8727 8.53345 22.4 8.53345H9.59996Z" fill="black"></path>
          <path fill-rule="evenodd" clip-rule="evenodd" d="M7.46662 12.5334C7.46662 12.0916 7.82479 11.7334 8.26662 11.7334L21.0666 11.7334C21.5085 11.7334 21.8666 12.0916 21.8666 12.5334C21.8666 12.9753 21.5085 13.3334 21.0666 13.3334L8.26662 13.3334C7.82479 13.3334 7.46662 12.9753 7.46662 12.5334Z" fill="black"></path>
        </svg>
        <span>Как обычная оплата картой</span>
      </div>
    `;

      const payments = document.createElement('div');
      payments.className = 'podeli-payments';
      payments.innerHTML = this.config.payments.map((p, i) => `
      <div class="podeli-payment-item">
        <div class="podeli-payment-date">${i === 0 ? 'Сегодня' : p.date}</div>
        <div class="podeli-payment-amount">${p.amount} <span>₽</span></div>
        <div class="podeli-payment-line"></div>
      </div>
    `).join('');

      const footer = document.createElement('div');
      footer.className = 'podeli-modal-footer';
      footer.innerHTML = 'Подробнее о сервисе можно узнать на <a href="https://podeli.ru" target="_blank">podeli.ru</a>';

      modal.appendChild(closeBtn);
      modal.appendChild(header);
      modal.appendChild(description);
      modal.appendChild(features);
      modal.appendChild(payments);
      modal.appendChild(footer);

      document.body.appendChild(bg);
      document.body.appendChild(modal);

      this.modal = modal;
      this.bg = bg;

      bg.addEventListener('click', () => this.closeModal());
    },

    openModal() {
      this.modal.classList.add('active');
      this.bg.classList.add('active');
      document.body.style.overflow = 'hidden';
    },

    closeModal() {
      this.modal.classList.remove('active');
      this.bg.classList.remove('active');
      document.body.style.overflow = 'auto';
    }
  };

  document.addEventListener('DOMContentLoaded', () => {
    PodeliWidget.init('#podeli-container');
  });
</script>
